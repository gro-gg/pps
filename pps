#!/bin/bash

PPS_CONFIG=~/.config/pps

###################
# private functions
###################

__pps_print_usage() {
	echo "usage:"
	echo "pps <profile>		: activates the defined <profile>"
	#echo "des clear			: clear the actual profile"
}

__pps_init_config() {
	if [ ! -d "${PPS_CONFIG}" ] ; then
		echo "pps config directory ${PPS_CONFIG} does not exist!"
		echo "Creating initial config in directory ${PPS_CONFIG}"
		mkdir -p "${PPS_CONFIG}"
		cp template "${PPS_CONFIG}"/template
	fi
}

__pps_switch-profile() {
	$SHELL "${PPS_CONFIG}/$1"
}

######
# main
######

pps() {
	__pps_init_config

	if [ $# -ne 1 ] ; then
		__pps_print_usage
		return 1
	fi

	if [ -f "${PPS_CONFIG}/$1" ] ; then
		__pps_switch-profile "$1"
	else
		echo "Unknown profile: $1"
		__pps_print_usage
		return 1
	fi
}

